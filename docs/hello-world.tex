\documentclass{article}
\usepackage{hyperref}
\usepackage{todonotes}
\setuptodonotes{inline}
\setlength{\parindent}{0em}

\title{Hello World specification}
\begin{document}

\maketitle

\section{Interactions}

\begin{itemize}
  \item UTXO with a datum that is an int
  \item Website shows the int
  \item Website lets you increment the int
\end{itemize}

\section{Acceptance Criteria}

\begin{itemize}
  \item Anyone can increment the int (no authentication)
\end{itemize}

\section{Implementation Details}

\begin{itemize}
  \item This all happens in the dUSD repo
  \item On-chain code written in Plutarch
  \item Off-chain code written in PAB
  \item Plutarch code gets compiled into a ByteString, which can be included in
    the PAB transactions as it would for PlutusTx
  \item Front-end
  \begin{itemize}
    \item Foundations built in HTML/CSS, with one Purescript component to link
      with the PAB and browser wallets (TBD)
    \item User wallet: Nami (for first version)
  \end{itemize}
  \item Once we’re done, we can `git tag' the commit where that’s done and then
    upgrade this to the price module implementation in-place.
  \item How to balance transactions?
    \todo{
      \url{https://github.com/input-output-hk/plutus-apps/issues/249\#issuecomment-1085834665}
    }
\end{itemize}

\section{Tests}

\begin{itemize}
  \item Apropos-tx testing for the on-chain code
  \begin{itemize}
    \item the plutarch increment function satisfies the property (increment(n) = n + 1)
    \item the compiled validator validates if and only if the output datum returns to the script address, is of type integer, and is equal to increment(input datum)
  \end{itemize}
  \item Unit test for on-chain code:
  \begin{itemize}
    \item increment from 0 to 1
    \item increment from 1 to 2
  \end{itemize}
  \item E2E frontend testing: Set up NixOS VM, launch browser, connect to Nami
  \begin{itemize}
    \item Selenium
      \begin{itemize}
        \item Check that when the server is initialized, the website shows the
          number $0$
        \item Check that incrementing works: $0$ to $1$, $1$ to $2$
        \item Open two browsers, connected to two separate wallets, and check
          that incrementing on one updates the number on the other after
          refresh: $0$ to $1$, $1$ to $2$
        \item Launch the two browsers in separate VMs.
          \todo{See issue \url{https://github.com/ArdanaLabs/dUSD/issues/87}.}
      \end{itemize}
    \item Lighthouse score above $90$, to check website performance
  \end{itemize}
  \item PAB E2E testing: The same tests will be ran as for the frontend tests,
    but using a second PAB to sign and submit transactions.
    The tests will be ran against a local testnet set up through Maeserat.
  \item Contract Model Tests with PAB
  \begin{itemize}
    \item Wallet signs and submits a transaction
    \item Transactions are submitted by separate wallets (i.e. determine
      atomicity constraints)
    \item \todo{@Dan: Which tests do we want to run? `noFundsLocked'?}
  \end{itemize}
  \item This project will be deployed to mainnet to run manual tests
\end{itemize}

\section{Features to be added}

\begin{itemize}
  \item Frontend integration with Yoroi, Daedelus. Any other browser wallets?
  \item Replace datum to something not-builtin, to test encoding/decoding match
    between on-chain and off-chain
  \item Maeserat: Volume tests, benchmarks for time and memory consumption
  \item Set up an NFT-system to persistently identify and track the Hello World
    UTXOs
\end{itemize}

\end{document}
